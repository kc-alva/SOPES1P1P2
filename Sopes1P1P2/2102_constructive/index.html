<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Constructive HTML Template</title>
<!--

Template 2102 Constructive

http://www.tooplate.com/view/2102-constructive

-->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">  <!-- Google web font "Open Sans" -->
	<link rel="stylesheet" href="css/fontawesome-all.min.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/magnific-popup.css"/>
	<link rel="stylesheet" type="text/css" href="slick/slick.css"/>
	<link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
	<link rel="stylesheet" href="css/tooplate-style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>

	<script>
		var renderPage = true;

	if(navigator.userAgent.indexOf('MSIE')!==-1
		|| navigator.appVersion.indexOf('Trident/') > 0){
   		/* Microsoft Internet Explorer detected in. */
   		alert("Please view this in a modern browser such as Chrome or Microsoft Edge.");
   		renderPage = false;
	}
	</script>
</head>

<body>
	<!-- Loader -->
	<div id="loader-wrapper">
		<div id="loader"></div>
		<div class="loader-section section-left"></div>
		<div class="loader-section section-right"></div>
	</div>
	
	<!-- Page Content -->
	<div class="container-fluid tm-main">
		<div class="row tm-main-row">

			<!-- Sidebar -->
			<div id="tmSideBar" class="col-xl-3 col-lg-4 col-md-12 col-sm-12 sidebar">

				<button id="tmMainNavToggle" class="menu-icon">&#9776;</button>

				<div class="inner">
					<nav id="tmMainNav" class="tm-main-nav">
						<ul>
							<li>
								<a href="#intro" id="tmNavLink1" class="scrolly active" data-bg-img="constructive_bg_01.jpg" data-page="#tm-section-1">
									<i class="fas fa-home tm-nav-fa-icon"></i>
									<span>SOPES1</span>
								</a>
							</li>
							<li>
								<a href="#products" id="tmNavLink2" class="scrolly" data-bg-img="constructive_bg_02.jpg" data-page="#tm-section-2" data-page-type="carousel">
									<i class="fas fa-map tm-nav-fa-icon"></i>
									<span>PROCESO</span>
								</a>
							</li>							
							<li>
								<a href="#intro" id="tmNavLink4" class="scrolly active" data-bg-img="constructive_bg_01.jpg" data-page="#tm-section-63">
									<i class="fas fa-home tm-nav-fa-icon"></i>
									<span>CPU</span>
								</a>
							</li>
							<li>
								<a href="#intro" id="tmNavLink3" class="scrolly active" data-bg-img="constructive_bg_01.jpg" data-page="#tm-section-62">
									<i class="fas fa-home tm-nav-fa-icon"></i>
									<span>RAM</span>
								</a>
							</li>							
							<li>
								<a href="#company" class="scrolly" data-bg-img="constructive_bg_03.jpg" data-page="#tm-section-3">
									<i class="fas fa-users tm-nav-fa-icon"></i>
									<span>√ÅRBOL</span>
								</a>
							</li>
						</ul>
					</nav>
				</div>
			</div>

			<div class="col-xl-9 col-lg-8 col-md-12 col-sm-12 tm-content">

					<!-- section 1 -->
					<section id="tm-section-1" class="tm-section">
						<div class="ml-auto">
							<header class="mb-4"><h1 class="tm-text-shadow">SISTEMAS OPERATIVOS 1 </h1><h1 class="tm-text-shadow">PROYECTO 1</h1></header>
							
						</br>
					</br>
					</br>
					<p class="mb-5 tm-font-big">JERSON EDUARDO VILLATORO NOVA - 201442819 </p>
					<p class="mb-5 tm-font-big">KEVIN CRISTOPHER JUVENTINO ALVARADO MALDONADO - 201222567</p>
							<!-- data-nav-link holds the ID of nav item, which means this link should behave the same as that nav item  -->
						</div>
					</section>

					<section id="tm-section-62" class="tm-section">
						<div class="ml-auto">
							<header class="mb-4"><h1 class="tm-text-shadow">Monitor RAM</h1></header>
							<table style="border: solid 1px black;">
								<thead class="row">
								  <th class="col-sm-2 testim_content"></th>
								  <th class="col-sm-2 testim_content"></th>
								</thead>
								<tbody id="cuerpo2">
								</tbody>
							</table>							
						</div>
						<div class="" id="tab4">
							<p class="title"><b>Grafica </b> RAM</p>
							<div style="height:40vh; width:50vw">
								<canvas id="myChart2"></canvas>
							</div>
						</div>
					</section>
					<section id="tm-section-63" class="tm-section">
						<div class="ml-auto">
							<header class="mb-4"><h1 class="tm-text-shadow">Monitor CPU</h1></header>
							<table style="border: solid 1px black;">
								<thead class="row">
								  <th class="col-sm-2 testim_content"></th>
								  <th class="col-sm-2 testim_content"></th>
								</thead>
								<tbody id="cuerpo1">
								</tbody>
							</table>							
						</div>
						<div class="" id="tab4" >
							<p class="title"><b>Grafica </b> CPU</p>
							<div style="height:40vh; width:50vw">
								<canvas id="myChart"></canvas>
							</div>
						</div>
					</section>

					<!-- section 2 -->
					<section id="tm-section-2" class="tm-section tm-section-carousel">
						<div>
							<header class="mb-4"><h2 class="tm-text-shadow">LISTA DE PROCESOS</h2></header>
							<div>
								<table style="border: solid 1px black;">
									<thead class="row">
									  <th class="col-sm-2 testim_content"></th>
									  <th class="col-sm-2 testim_content"></th>
									</thead>
									<tbody id="cuerpo5">
									</tbody>
								</table>
							</div>		            
							<div>
								<table style="border: solid 1px black;background-color: #dcdcdc;">
									<thead class="row">
									  <th class="col-sm-2 testim_content"></th>
									  <th class="col-sm-2 testim_content"></th>
									</thead>
									<tr>
										<td style="color:#000000">PID</td>
										<td style="color:#000000">NOMBRE</td>
										<td style="color:#000000">ESTADO</td>
										<td style="color:#000000">RAM</td>
										<td style="color:#000000">KILL</td>

									</tr>
									<tbody id="cuerpo3">
									</tbody>
								</table>
							</div>		            		          
						</div>       		          	
					</section>

					<!-- section 3 -->
					<section id="tm-section-3" class="tm-section">						
						<h1>ARBOL</h1>
							<div id="cuerpo4">
								
							</div>				               
					</section>

					<!-- section 4 -->
					<section id="tm-section-4" class="tm-section">
						<div class="tm-bg-transparent-black tm-contact-box-pad">
							<div class="row mb-4">
								<div class="col-sm-12">
									<header><h2 class="tm-text-shadow">Contact Us</h2></header>
								</div>
							</div>
							<div class="row tm-page-4-content">
								<div class="col-md-6 col-sm-12 tm-contact-col">
									<div class="contact_message">
										<form action="#contact" method="post" class="contact-form">
											<div class="form-group">
												<input type="text" id="contact_name" name="contact_name" class="form-control" placeholder="Name" required>
											</div>
											<div class="form-group">
												<input type="email" id="contact_email" name="contact_email" class="form-control" placeholder="Email" required>
											</div>
											<div class="form-group">
												<textarea id="contact_message" name="contact_message" class="form-control" rows="9" placeholder="Message" required></textarea>
											</div>
											<button type="submit" class="btn tm-btn-submit tm-btn ml-auto">Submit</button>
										</form>
									</div>
								</div>
								<div class="col-md-6 col-sm-12 tm-contact-col">
									<div class="tm-address-box">
										<p>Aliquam interdum, nisl sedd faucibus tempor, massa velit laoreet ipsum, et faucibus sapien magna at enim. Suspendisse a dictum tortor.</p>
										<p>Curabitur venenatis leo in augue convallis, vulputate sollicitudin ex maximus.</p>
										<address>
											120-240 Aliquam nec neque augue<br>
											Suspendisse tincidunt nunc,<br>
											vitae sagis justo 11000
										</address>
									</div>
								</div>
							</div>
						</div>
					</section>					
				</div>	<!-- .tm-content -->							
				<footer class="footer-link">
					<p class="tm-copyright-text">Copyright &copy; 2018 Constructive Co. Ltd. 
                    
                    - Design: Tooplate</p>
				</footer>
			</div>	<!-- row -->			
		</div>
		<div id="preload-01"></div>
		<div id="preload-02"></div>
		<div id="preload-03"></div>
		<div id="preload-04"></div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>
		<!-- <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script> -->
		<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
		<script type="text/javascript" src="js/jquery.backstretch.min.js"></script>
		<script type="text/javascript" src="slick/slick.min.js"></script> <!-- Slick Carousel -->
		<script>

		var sidebarVisible = false;
		var currentPageID = "#tm-section-1";

		// Setup Carousel
		function setupCarousel() {

			// If current page isn't Carousel page, don't do anything.
			if($('#tm-section-2').css('display') == "none") {
			}
			else {	// If current page is Carousel page, set up the Carousel.

				var slider = $('.tm-img-slider');
				var windowWidth = $(window).width();

				if (slider.hasClass('slick-initialized')) {
					slider.slick('destroy');
				}

				if(windowWidth < 640) {
					slider.slick({
	              		dots: true,
	              		infinite: false,
	              		slidesToShow: 1,
	              		slidesToScroll: 1
	              	});
				}
				else if(windowWidth < 992) {
					slider.slick({
	              		dots: true,
	              		infinite: false,
	              		slidesToShow: 2,
	              		slidesToScroll: 1
	              	});
				}
				else {
					// Slick carousel
	              	slider.slick({
	              		dots: true,
	              		infinite: false,
	              		slidesToShow: 3,
	              		slidesToScroll: 2
	              	});
				}

				// Init Magnific Popup
				$('.tm-img-slider').magnificPopup({
				  delegate: 'a', // child items selector, by clicking on it popup will open
				  type: 'image',
				  gallery: {enabled:true}
				  // other options
				});
      		}
  		}

  		// Setup Nav
  		function setupNav() {
  			// Add Event Listener to each Nav item
	     	$(".tm-main-nav a").click(function(e){
	     		e.preventDefault();
		    	
		    	var currentNavItem = $(this);
		    	changePage(currentNavItem);
		    	
		    	setupCarousel();
		    	setupFooter();

		    	// Hide the nav on mobile
		    	$("#tmSideBar").removeClass("show");
		    });	    
  		}

  		function changePage(currentNavItem) {
  			// Update Nav items
  			$(".tm-main-nav a").removeClass("active");
     		currentNavItem.addClass("active");

	    	$(currentPageID).hide();

	    	// Show current page
	    	currentPageID = currentNavItem.data("page");
	    	$(currentPageID).fadeIn(1000);

	    	// Change background image
	    	var bgImg = currentNavItem.data("bgImg");
	    	$.backstretch("img/" + bgImg);		    	
  		}

  		// Setup Nav Toggle Button
  		function setupNavToggle() {

			$("#tmMainNavToggle").on("click", function(){
				$(".sidebar").toggleClass("show");
			});
  		}

  		// If there is enough room, stick the footer at the bottom of page content.
  		// If not, place it after the page content
  		function setupFooter() {
  			
  			var padding = 100;
  			var footerPadding = 40;
  			var mainContent = $("section"+currentPageID);
  			var mainContentHeight = mainContent.outerHeight(true);
  			var footer = $(".footer-link");
  			var footerHeight = footer.outerHeight(true);
  			var totalPageHeight = mainContentHeight + footerHeight + footerPadding + padding;
  			var windowHeight = $(window).height();		

  			if(totalPageHeight > windowHeight){
  				$(".tm-content").css("margin-bottom", footerHeight + footerPadding + "px");
  				footer.css("bottom", footerHeight + "px");  			
  			}
  			else {
  				$(".tm-content").css("margin-bottom", "0");
  				footer.css("bottom", "20px");  				
  			}  			
  		}

  		// Everything is loaded including images.
      	$(window).on("load", function(){

      		// Render the page on modern browser only.
      		if(renderPage) {
				// Remove loader
		      	$('body').addClass('loaded');

		      	// Page transition
		      	var allPages = $(".tm-section");

		      	// Handle click of "Continue", which changes to next page
		      	// The link contains data-nav-link attribute, which holds the nav item ID
		      	// Nav item ID is then used to access and trigger click on the corresponding nav item
		      	var linkToAnotherPage = $("a.tm-btn[data-nav-link]");
			    
			    if(linkToAnotherPage != null) {
			    	
			    	linkToAnotherPage.on("click", function(){
			    		var navItemToHighlight = linkToAnotherPage.data("navLink");
			    		$("a" + navItemToHighlight).click();
			    	});
			    }
		      	
		      	// Hide all pages
		      	allPages.hide();

		      	$("#tm-section-1").fadeIn();

		     	// Set up background first page
		     	var bgImg = $("#tmNavLink1").data("bgImg");
		     	
		     	$.backstretch("img/" + bgImg, {fade: 500});

		     	// Setup Carousel, Nav, and Nav Toggle
			    setupCarousel();
			    setupNav();
			    setupNavToggle();
			    setupFooter();

			    // Resize Carousel upon window resize
			    $(window).resize(function() {
			    	setupCarousel();
			    	setupFooter();
			    });
      		}	      	
		});

		

		</script>

			<script>
				$(function(){
				$(document).ready(function(){
					var cont = 0;
					
					function arbol(){
						$.get('http://localhost:8080/proc', function(data){

							var proc = data.ListaProc
							
						$("#cuerpo4").html("");
						var tr = '<div id="jstree" class="col-lg-12" style="font-weight:bold; background-color:#4AA4F4"> <ul>'
						for(var i=0; i<proc.length-1; i++){
							tr += `<li>${proc[i].Nombre} `
							var proceso = proc[i].Hijos.split(" ")
							var hijos = `<ul>`;
							for(var x=0; x<proceso.length-1; x++){
								hijos += `<li id="${proceso[x]}">${proceso[x]}</li>`	
							}
							tr += hijos + '</ul> </li>'
							
							
						}		
							tr += ` </ul></div> `
							
							console.log(tr)
							$("#cuerpo4").append(tr)

							$(function() {  
								$('#jstree').on("changed.jstree", function (e, data) {
									console.log(data.selected);
									});
								});

								$(function() {  
								$.jstree.defaults.core.themes.variant = "large";
								$('#jstree').jstree();
								});

								$(function() {  
								$('#jstree').jstree({
								"plugins" : [ "wholerow", "checkbox" ]
								});
								});
						})
					}
					arbol()
					//setInterval(peticionram,1000);
				})
				})
			</script>
<script>
	var arreglo = []
	$(function(){
		  $(document).ready(function(){
			var cont = 0;
			function peticioncpu(){
				$.get('http://localhost:8080/cpu', function(data){
					
					console.log(cont++);
				$("#cuerpo1").html("");
					var tr = `<tr><td style = "color:black;font-weight:bold;">Porcentaje CPU:   </td><td style="font-weight:bold">${data.porcentaje}</td></tr>`
					$("#cuerpo1").append(tr)
				})
			}
			setInterval(peticioncpu,1000);
		  })
		})

		$(function(){
		  $(document).ready(function(){
			var cont = 0;
			function getProc(){
        $.get('http://localhost:8080/proc', function(data){
        
        var proc = data.ListaProc

		$("#cuerpo5").html("");
					var tr = `<tr><td style = "color:black;font-weight:bold;">En Ejecuci√≥n:   </td><td style="font-weight:bold;color:black">${data.Ejecucion}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Suspendidos:   </td><td style="font-weight:bold;color:black">${data.Suspendidos}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Detenidos:   </td><td style="font-weight:bold;color:black">${data.Detendios}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Zombie:   </td><td style="font-weight:bold;color:black">${data.Zombie}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Total:   </td><td style="font-weight:bold;color:black">${data.Total}</td></tr>`
					
					$("#cuerpo5").append(tr)
		

        $("#cuerpo3").html("");
        for(var i=0; i<data.ListaProc.length; i++){
          var tr = `<tr style="border: 1px solid #000000;font-weight:bold">
          <td style="color:#000000;border: 1px solid #000000;">${proc[i].ID}</td>
          <td style="color:#000000;border: 1px solid #000000;">${proc[i].Nombre}</td>
          <td style="color:#000000;border: 1px solid #000000;">${proc[i].Estado}</td>
          <td style="color:#000000;border: 1px solid #000000;">${proc[i].RAM}</td>
		  <td style="color:#000000;border: 1px solid #000000;"> <button type="button" class="btn btn-primary" onClick="matarproceso(${proc[i].ID})" > KILL</button> </td>
          
          </tr>`;
          $("#cuerpo3").append(tr)
        }
        })
      }
			setInterval(getProc,1000);
		  })
		})



		

		$(function(){
		  $(document).ready(function(){
			var cont = 0;
			function peticionram(){
				$.get('http://localhost:8080/ram', function(data){
					
					
				$("#cuerpo2").html("");
					var tr = `<tr><td style = "color:black;font-weight:bold;">Total Memoria Ram (MB):   </td><td style="font-weight:bold">${data.total}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Total Memoria Ram Consumida (MB):   </td><td style="font-weight:bold">${data.consumida}</td></tr>`
					tr += `<tr><td style = "color:black;font-weight:bold;">Porcentaje consumido:   </td><td style="font-weight:bold">${data.porcentaje}</td></tr>`
					$("#cuerpo2").append(tr)
				})
			}
			setInterval(peticionram,1000);
		  })
		})

		function matarproceso(id){
      $.get('http://localhost:8080/kill/'+id, function(data){
        alert("KILL: " + id)
        })
      }

		/*************************GRAFICAS***************************************/
		
		$(function(){
		  $(document).ready(function(){
			var cont = 0;
			var ctx = document.getElementById("myChart").getContext("2d");
				
				var myChart= new Chart(ctx,{
						type:"line",
						data:{
							labels:['col1','col2','col3','col4','col5'],
							datasets:[{
									label:'Estadisticas de Mi PC',
									data:[0,0,0,0,0,0],
									backgroundColor:"white",
									borderColor: "#4AA4F4",
									fill:true,
									lineTension:0,
									pointRadius:5
									
							}]
						},
						options:{
							scales:{
									yAxes:[{
										ticks:{
											beginAtZero:true
										}
									}]
								}
						}
					});
			

			function llenadoarray(){
				$.get('http://localhost:8080/cpu', function(data){
					if(cont < 5){
						
						myChart.data.datasets[0].data[cont] = data.porcentaje;
						myChart.update();
						cont++;
					}else{
						
						myChart.data.datasets[0].data[0] = myChart.data.datasets[0].data[1];
						myChart.data.datasets[0].data[1] = myChart.data.datasets[0].data[2];
						myChart.data.datasets[0].data[2] = myChart.data.datasets[0].data[3];
						myChart.data.datasets[0].data[3] = myChart.data.datasets[0].data[4];
						myChart.data.datasets[0].data[4] = myChart.data.datasets[0].data[5];
						myChart.data.datasets[0].data[5] = data.porcentaje;
						myChart.update()
						cont++;
					}
				})
			}
			setInterval(llenadoarray,1000);
		  })
		})

		$(function(){
		  $(document).ready(function(){
			var cont = 0;
			var ctx2 = document.getElementById("myChart2").getContext("2d");
				
				var myChart2= new Chart(ctx2,{
						type:"line",
						data:{
							labels:['col1','col2','col3','col4','col5','col6','col7','col8','col9','col10'],
							datasets:[{
									label:'Estadisticas de Mi PC',
									data:[0,0,0,0,0,0,0,0,0,0,0],
									backgroundColor:"white",
                        			borderColor: "#4AA4F4",
									fill:true,
									lineTension:0,
									pointRadius:5
							}]
						},
						options:{
							scales:{
									yAxes:[{
										ticks:{
											beginAtZero:true
										}
									}]
								}
						}
					});
			

			function llenadoarray(){
				$.get('http://localhost:8080/ram', function(data){
					if(cont < 10){
						
						myChart2.data.datasets[0].data[cont] = data.consumida;
						myChart2.update();
						cont++;
					}else{
						myChart2.data.datasets[0].data = [0,0,0,0,0,0,0,0,0,0,0]
						myChart2.update()
						cont = 0;
					}
				})
			}
			setInterval(llenadoarray,1000);
		  })
		})
	</script>
		
	</body>
</html>